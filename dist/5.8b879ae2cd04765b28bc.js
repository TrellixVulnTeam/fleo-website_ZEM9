(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{RQpc:function(e,t,n){"use strict";n.r(t),n.d(t,"PostsModule",function(){return ft});var r=n("tyNb"),o=n("ofXK"),i=n("8PDw"),a=n("lJxs"),s=n("fXoL"),u=n("I/3d"),c=function(){return(c=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},l=function(){function e(e){this.afs=e,this.postsCollection=this.afs.collection("posts",function(e){return e.orderBy("published","desc")})}return e.prototype.getPosts=function(){return this.postsCollection.snapshotChanges().pipe(Object(a.a)(function(e){return e.map(function(e){var t=e.payload.doc.data();return c({id:e.payload.doc.id},t)})}))},e.prototype.getPostData=function(e){return this.postDoc=this.afs.doc("posts/"+e),this.postDoc.valueChanges()},e.prototype.getPost=function(e){return this.afs.doc("posts/"+e)},e.prototype.create=function(e){this.postsCollection.add(e)},e.prototype.delete=function(e){return this.getPost(e).delete()},e.prototype.update=function(e,t){return this.getPost(e).update(t)},e.\u0275fac=function(t){return new(t||e)(s.bc(u.a))},e.\u0275prov=s.Lb({token:e,factory:e.\u0275fac}),e}(),h=n("1OyB"),p=n("vuIU"),f=n("HDdC"),d=n("LRne"),b=n("Cfvw"),g=n("Kj3r"),_=n("pxpQ"),m=n("eIep"),v=n("spgP"),y=n("zIRd"),w=n("mrSG"),R=n("qOnz"),T=n("/6Yf"),O="firebasestorage.googleapis.com",k=function(e){function t(n,r){var o=e.call(this,U(n),"Firebase Storage: "+r+" ("+U(n)+")")||this;return o.customData={serverResponse:null},Object.setPrototypeOf(o,t.prototype),o}return Object(w.d)(t,e),t.prototype._codeEquals=function(e){return U(e)===this.code},Object.defineProperty(t.prototype,"message",{get:function(){return this.customData.serverResponse?this.message+"\n"+this.customData.serverResponse:this.message},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"serverResponse",{get:function(){return this.customData.serverResponse},set:function(e){this.customData.serverResponse=e},enumerable:!1,configurable:!0}),t}(R.c);function U(e){return"storage/"+e}function P(){return new k("unknown","An unknown error occurred, please check the error payload for server response.")}function x(){return new k("canceled","User canceled the upload/download.")}function C(){return new k("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function S(e){return new k("invalid-argument",e)}function j(){return new k("app-deleted","The Firebase app was deleted.")}function I(e){return new k("invalid-root-operation","The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function E(e,t){return new k("invalid-format","String does not match format '"+e+"': "+t)}function A(e){throw new k("internal-error","Internal error: "+e)}var M={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},L=function(){return function(e,t){this.data=e,this.contentType=t||null}}();function D(e,t){switch(e){case M.RAW:return new L(F(t));case M.BASE64:case M.BASE64URL:return new L(q(e,t));case M.DATA_URL:return new L((n=new N(t)).base64?q(M.BASE64,n.rest):function(e){var t;try{t=decodeURIComponent(e)}catch(n){throw E(M.DATA_URL,"Malformed data URL.")}return F(t)}(n.rest),new N(t).contentType)}var n;throw P()}function F(e){for(var t=[],n=0;n<e.length;n++){var r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|63&r);else if(55296==(64512&r))if(n<e.length-1&&56320==(64512&e.charCodeAt(n+1))){var o=r,i=e.charCodeAt(++n);t.push(240|(r=65536|(1023&o)<<10|1023&i)>>18,128|r>>12&63,128|r>>6&63,128|63&r)}else t.push(239,191,189);else 56320==(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function q(e,t){switch(e){case M.BASE64:var n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r)throw E(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case M.BASE64URL:var o=-1!==t.indexOf("+"),i=-1!==t.indexOf("/");if(o||i)throw E(e,"Invalid character '"+(o?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/")}var a;try{a=atob(t)}catch(c){throw E(e,"Invalid character found")}for(var s=new Uint8Array(a.length),u=0;u<a.length;u++)s[u]=a.charCodeAt(u);return s}var N=function(){return function(e){this.base64=!1,this.contentType=null;var t=e.match(/^data:([^,]+)?,/);if(null===t)throw E(M.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var n,r,o=t[1]||null;null!=o&&(this.base64=(n=o).length>=(r=";base64").length&&n.substring(n.length-r.length)===r,this.contentType=this.base64?o.substring(0,o.length-";base64".length):o),this.rest=e.substring(e.indexOf(",")+1)}}(),B={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function z(e){switch(e){case"running":case"pausing":case"canceling":return B.RUNNING;case"paused":return B.PAUSED;case"success":return B.SUCCESS;case"canceled":return B.CANCELED;case"error":default:return B.ERROR}}var H=function(e){return e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT",e}({}),G=function(){function e(){var e=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=H.NO_ERROR,this.sendPromise_=new Promise(function(t){e.xhr_.addEventListener("abort",function(){e.errorCode_=H.ABORT,t(e)}),e.xhr_.addEventListener("error",function(){e.errorCode_=H.NETWORK_ERROR,t(e)}),e.xhr_.addEventListener("load",function(){t(e)})})}return e.prototype.send=function(e,t,n,r){if(this.sent_)throw A("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==r)for(var o in r)r.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,r[o].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_},e.prototype.getErrorCode=function(){if(!this.sent_)throw A("cannot .getErrorCode() before sending");return this.errorCode_},e.prototype.getStatus=function(){if(!this.sent_)throw A("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}},e.prototype.getResponseText=function(){if(!this.sent_)throw A("cannot .getResponseText() before sending");return this.xhr_.responseText},e.prototype.abort=function(){this.xhr_.abort()},e.prototype.getResponseHeader=function(e){return this.xhr_.getResponseHeader(e)},e.prototype.addUploadProgressListener=function(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)},e.prototype.removeUploadProgressListener=function(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)},e}(),X=function(){function e(){}return e.prototype.createXhrIo=function(){return new G},e}(),V=function(){function e(e,t){this.bucket=e,this.path_=t}return Object.defineProperty(e.prototype,"path",{get:function(){return this.path_},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isRoot",{get:function(){return 0===this.path.length},enumerable:!1,configurable:!0}),e.prototype.fullServerUrl=function(){var e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)},e.prototype.bucketOnlyServerUrl=function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"},e.makeFromBucketSpec=function(t){var n;try{n=e.makeFromUrl(t)}catch(r){return new e(t,"")}if(""===n.path)return n;throw new k("invalid-default-bucket","Invalid default bucket '"+t+"'.")},e.makeFromUrl=function(t){var n=null,r="([A-Za-z0-9.\\-_]+)",o=new RegExp("^gs://"+r+"(/(.*))?$","i");function i(e){e.path_=decodeURIComponent(e.path)}for(var a=O.replace(/[.]/g,"\\."),s=[{regex:o,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp("^https?://"+a+"/v[A-Za-z0-9_]+/b/"+r+"/o(/([^?#]*).*)?$","i"),indices:{bucket:1,path:3},postModify:i},{regex:new RegExp("^https?://(?:storage.googleapis.com|storage.cloud.google.com)/"+r+"/([^?#]*)","i"),indices:{bucket:1,path:2},postModify:i}],u=0;u<s.length;u++){var c=s[u],l=c.regex.exec(t);if(l){var h=l[c.indices.path];h||(h=""),n=new e(l[c.indices.bucket],h),c.postModify(n);break}}if(null==n)throw function(e){return new k("invalid-url","Invalid URL '"+e+"'.")}(t);return n},e}(),Q=function(){function e(e){this.promise_=Promise.reject(e)}return e.prototype.getPromise=function(){return this.promise_},e.prototype.cancel=function(e){},e}();function W(e){return"string"==typeof e||e instanceof String}function J(e){return K()&&e instanceof Blob}function K(){return"undefined"!=typeof Blob}function $(e,t,n,r){if(r<t)throw S("Invalid value for '"+e+"'. Expected "+t+" or greater.");if(r>n)throw S("Invalid value for '"+e+"'. Expected "+n+" or less.")}function Y(e){return"https://"+O+"/v0"+e}function Z(e){var t=encodeURIComponent,n="?";for(var r in e)e.hasOwnProperty(r)&&(n=n+(t(r)+"=")+t(e[r])+"&");return n.slice(0,-1)}var ee=function(){function e(e,t,n,r,o,i,a,s,u,c,l){var h=this;this.pendingXhr_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=e,this.method_=t,this.headers_=n,this.body_=r,this.successCodes_=o.slice(),this.additionalRetryCodes_=i.slice(),this.callback_=a,this.errorCallback_=s,this.progressCallback_=c,this.timeout_=u,this.pool_=l,this.promise_=new Promise(function(e,t){h.resolve_=e,h.reject_=t,h.start_()})}return e.prototype.start_=function(){var e=this;function t(t,n){var r,o=e.resolve_,i=e.reject_,a=n.xhr;if(n.wasSuccessCode)try{var s=e.callback_(a,a.getResponseText());void 0!==s?o(s):o()}catch(u){i(u)}else null!==a?((r=P()).serverResponse=a.getResponseText(),i(e.errorCallback_?e.errorCallback_(a,r):r)):i(r=n.canceled?e.appDelete_?j():x():new k("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))}this.canceled_?t(0,new te(!1,null,!0)):this.backoffId_=function(t,n,r){var o=1,i=null,a=!1,s=0;function u(){return 2===s}var c=!1;function l(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];c||(c=!0,n.apply(null,e))}function h(t){i=setTimeout(function(){i=null,function(t,n){if(n)t(!1,new te(!1,null,!0));else{var r=e.pool_.createXhrIo();e.pendingXhr_=r,null!==e.progressCallback_&&r.addUploadProgressListener(o),r.send(e.url_,e.method_,e.body_,e.headers_).then(function(n){null!==e.progressCallback_&&n.removeUploadProgressListener(o),e.pendingXhr_=null;var r=(n=n).getErrorCode()===H.NO_ERROR,i=n.getStatus();if(r&&!e.isRetryStatusCode_(i)){var a=-1!==e.successCodes_.indexOf(i);t(!0,new te(a,n))}else{var s=n.getErrorCode()===H.ABORT;t(!1,new te(!1,null,s))}})}function o(t){null!==e.progressCallback_&&e.progressCallback_(t.loaded,t.lengthComputable?t.total:-1)}}(p,u())},t)}function p(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(!c)if(e)l.call.apply(l,Object(w.h)([null,e],t));else{var r;u()||a?l.call.apply(l,Object(w.h)([null,e],t)):(o<64&&(o*=2),1===s?(s=2,r=0):r=1e3*(o+Math.random()),h(r))}}var f=!1;function d(e){f||(f=!0,c||(null!==i?(e||(s=2),clearTimeout(i),h(0)):e||(s=1)))}return h(0),setTimeout(function(){a=!0,d(!0)},r),d}(0,t,this.timeout_)},e.prototype.getPromise=function(){return this.promise_},e.prototype.cancel=function(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingXhr_&&this.pendingXhr_.abort()},e.prototype.isRetryStatusCode_=function(e){var t=e>=500&&e<600,n=-1!==[408,429].indexOf(e),r=-1!==this.additionalRetryCodes_.indexOf(e);return t||n||r},e}(),te=function(){return function(e,t,n){this.wasSuccessCode=e,this.xhr=t,this.canceled=!!n}}();function ne(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function re(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=ne();if(void 0!==n){for(var r=new n,o=0;o<e.length;o++)r.append(e[o]);return r.getBlob()}if(K())return new Blob(e);throw new k("unsupported-environment","This browser doesn't seem to support creating Blobs")}var oe=function(){function e(e,t){var n=0,r="";J(e)?(this.data_=e,n=e.size,r=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=r}return e.prototype.size=function(){return this.size_},e.prototype.type=function(){return this.type_},e.prototype.slice=function(t,n){if(J(this.data_)){var r=(i=t,a=n,(o=this.data_).webkitSlice?o.webkitSlice(i,a):o.mozSlice?o.mozSlice(i,a):o.slice?o.slice(i,a):null);return null===r?null:new e(r)}var o,i,a;return new e(new Uint8Array(this.data_.buffer,t,n-t),!0)},e.getBlob=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(K()){var r=t.map(function(t){return t instanceof e?t.data_:t});return new e(re.apply(null,r))}var o=t.map(function(e){return W(e)?D(M.RAW,e).data:e.data_}),i=0;o.forEach(function(e){i+=e.byteLength});var a=new Uint8Array(i),s=0;return o.forEach(function(e){for(var t=0;t<e.length;t++)a[s++]=e[t]}),new e(a,!0)},e.prototype.uploadData=function(){return this.data_},e}();function ie(e){var t,n;try{t=JSON.parse(e)}catch(r){return null}return"object"!=typeof(n=t)||Array.isArray(n)?null:t}function ae(e){var t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function se(e,t){return t}var ue=function(){return function(e,t,n,r){this.server=e,this.local=t||e,this.writable=!!n,this.xform=r||se}}(),ce=null;function le(){if(ce)return ce;var e=[];e.push(new ue("bucket")),e.push(new ue("generation")),e.push(new ue("metageneration")),e.push(new ue("name","fullPath",!0));var t=new ue("name");t.xform=function(e,t){return function(e){return!W(e)||e.length<2?e:ae(e)}(t)},e.push(t);var n=new ue("size");return n.xform=function(e,t){return void 0!==t?Number(t):t},e.push(n),e.push(new ue("timeCreated")),e.push(new ue("updated")),e.push(new ue("md5Hash",null,!0)),e.push(new ue("cacheControl",null,!0)),e.push(new ue("contentDisposition",null,!0)),e.push(new ue("contentEncoding",null,!0)),e.push(new ue("contentLanguage",null,!0)),e.push(new ue("contentType",null,!0)),e.push(new ue("metadata","customMetadata",!0)),ce=e}function he(e,t,n){var r=ie(t);return null===r?null:function(e,t,n){for(var r={type:"file"},o=n.length,i=0;i<o;i++){var a=n[i];r[a.local]=a.xform(r,t[a.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){var n=new V(e.bucket,e.fullPath);return t._makeStorageReference(n)}})}(r,e),r}(e,r,n)}function pe(e,t){for(var n={},r=t.length,o=0;o<r;o++){var i=t[o];i.writable&&(n[i.server]=e[i.local])}return JSON.stringify(n)}var fe=function(){return function(e,t,n,r){this.url=e,this.method=t,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}();function de(e){if(!e)throw P()}function be(e,t){return function(n,r){var o=he(e,r,t);return de(null!==o),o}}function ge(e){return function(t,n){var r;return(r=401===t.getStatus()?new k("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?new k("quota-exceeded","Quota for bucket '"+e.bucket+"' exceeded, please view quota on https://firebase.google.com/pricing/."):403===t.getStatus()?new k("unauthorized","User does not have permission to access '"+e.path+"'."):n).serverResponse=n.serverResponse,r}}function _e(e){var t=ge(e);return function(n,r){var o=t(n,r);return 404===n.getStatus()&&(o=new k("object-not-found","Object '"+e.path+"' does not exist.")),o.serverResponse=r.serverResponse,o}}function me(e,t,n){var r=Y(t.fullServerUrl()),o=e.maxOperationRetryTime,i=new fe(r,"GET",be(e,n),o);return i.errorHandler=_e(t),i}function ve(e,t,n){var r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=function(e,t){return t&&t.type()||"application/octet-stream"}(0,t)),r}var ye=function(){return function(e,t,n,r){this.current=e,this.total=t,this.finalized=!!n,this.metadata=r||null}}();function we(e,t){var n=null;try{n=e.getResponseHeader("X-Goog-Upload-Status")}catch(r){de(!1)}return de(!!n&&-1!==(t||["active"]).indexOf(n)),n}var Re=262144,Te=function(){return function(e,t,n){if("function"==typeof e||null!=t||null!=n)this.next=e,this.error=t,this.complete=n;else{var r=e;this.next=r.next,this.error=r.error,this.complete=r.complete}}}();function Oe(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];Promise.resolve().then(function(){return e.apply(void 0,t)})}}var ke=function(){function e(e,t,n){var r=this;void 0===n&&(n=null),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=n,this._mappings=le(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=function(e){r._request=void 0,r._chunkMultiplier=1,e._codeEquals("canceled")?(r._needToFetchStatus=!0,r.completeTransitions_()):(r._error=e,r._transition("error"))},this._metadataErrorHandler=function(e){r._request=void 0,e._codeEquals("canceled")?r.completeTransitions_():(r._error=e,r._transition("error"))},this._promise=new Promise(function(e,t){r._resolve=e,r._reject=t,r._start()}),this._promise.then(null,function(){})}return e.prototype._makeProgressCallback=function(){var e=this,t=this._transferred;return function(n){return e._updateProgress(t+n)}},e.prototype._shouldDoResumable=function(e){return e.size()>262144},e.prototype._start=function(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())},e.prototype._resolveToken=function(e){var t=this;this._ref.storage._getAuthToken().then(function(n){switch(t._state){case"running":e(n);break;case"canceling":t._transition("canceled");break;case"pausing":t._transition("paused")}})},e.prototype._createResumable=function(){var e=this;this._resolveToken(function(t){var n=function(e,t,n,r,o){var i=t.bucketOnlyServerUrl(),a=ve(t,r,o),s={name:a.fullPath},u=Y(i),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":r.size(),"X-Goog-Upload-Header-Content-Type":a.contentType,"Content-Type":"application/json; charset=utf-8"},l=pe(a,n),h=new fe(u,"POST",function(e){var t;we(e);try{t=e.getResponseHeader("X-Goog-Upload-URL")}catch(n){de(!1)}return de(W(t)),t},e.maxUploadRetryTime);return h.urlParams=s,h.headers=c,h.body=l,h.errorHandler=ge(t),h}(e._ref.storage,e._ref._location,e._mappings,e._blob,e._metadata),r=e._ref.storage._makeRequest(n,t);e._request=r,r.getPromise().then(function(t){e._request=void 0,e._uploadUrl=t,e._needToFetchStatus=!1,e.completeTransitions_()},e._errorHandler)})},e.prototype._fetchStatus=function(){var e=this,t=this._uploadUrl;this._resolveToken(function(n){var r=function(e,t,n,r){var o=new fe(n,"POST",function(e){var t=we(e,["active","final"]),n=null;try{n=e.getResponseHeader("X-Goog-Upload-Size-Received")}catch(i){de(!1)}n||de(!1);var o=Number(n);return de(!isNaN(o)),new ye(o,r.size(),"final"===t)},e.maxUploadRetryTime);return o.headers={"X-Goog-Upload-Command":"query"},o.errorHandler=ge(t),o}(e._ref.storage,e._ref._location,t,e._blob),o=e._ref.storage._makeRequest(r,n);e._request=o,o.getPromise().then(function(t){t=t,e._request=void 0,e._updateProgress(t.current),e._needToFetchStatus=!1,t.finalized&&(e._needToFetchMetadata=!0),e.completeTransitions_()},e._errorHandler)})},e.prototype._continueUpload=function(){var e=this,t=Re*this._chunkMultiplier,n=new ye(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken(function(o){var i;try{i=function(e,t,n,r,o,i,a,s){var u=new ye(0,0);if(a?(u.current=a.current,u.total=a.total):(u.current=0,u.total=r.size()),r.size()!==u.total)throw new k("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");var c=u.total-u.current,l=c;o>0&&(l=Math.min(l,o));var h=u.current,p={"X-Goog-Upload-Command":l===c?"upload, finalize":"upload","X-Goog-Upload-Offset":u.current},f=r.slice(h,h+l);if(null===f)throw C();var d=new fe(n,"POST",function(e,n){var o,a=we(e,["active","final"]),s=u.current+l,c=r.size();return o="final"===a?be(t,i)(e,n):null,new ye(s,c,"final"===a,o)},t.maxUploadRetryTime);return d.headers=p,d.body=f.uploadData(),d.progressCallback=s||null,d.errorHandler=ge(e),d}(e._ref._location,e._ref.storage,r,e._blob,t,e._mappings,n,e._makeProgressCallback())}catch(s){return e._error=s,void e._transition("error")}var a=e._ref.storage._makeRequest(i,o);e._request=a,a.getPromise().then(function(t){e._increaseMultiplier(),e._request=void 0,e._updateProgress(t.current),t.finalized?(e._metadata=t.metadata,e._transition("success")):e.completeTransitions_()},e._errorHandler)})},e.prototype._increaseMultiplier=function(){Re*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)},e.prototype._fetchMetadata=function(){var e=this;this._resolveToken(function(t){var n=me(e._ref.storage,e._ref._location,e._mappings),r=e._ref.storage._makeRequest(n,t);e._request=r,r.getPromise().then(function(t){e._request=void 0,e._metadata=t,e._transition("success")},e._metadataErrorHandler)})},e.prototype._oneShotUpload=function(){var e=this;this._resolveToken(function(t){var n=function(e,t,n,r,o){var i=t.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"},s=function(){for(var e="",t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();a["Content-Type"]="multipart/related; boundary="+s;var u=ve(t,r,o),c=pe(u,n),l=oe.getBlob("--"+s+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+c+"\r\n--"+s+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",r,"\r\n--"+s+"--");if(null===l)throw C();var h={name:u.fullPath},p=Y(i),f=e.maxUploadRetryTime,d=new fe(p,"POST",be(e,n),f);return d.urlParams=h,d.headers=a,d.body=l.uploadData(),d.errorHandler=ge(t),d}(e._ref.storage,e._ref._location,e._mappings,e._blob,e._metadata),r=e._ref.storage._makeRequest(n,t);e._request=r,r.getPromise().then(function(t){e._request=void 0,e._metadata=t,e._updateProgress(e._blob.size()),e._transition("success")},e._errorHandler)})},e.prototype._updateProgress=function(e){var t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()},e.prototype._transition=function(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request&&this._request.cancel();break;case"running":var t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=x(),this._state=e,this._notifyObservers();break;case"error":case"success":this._state=e,this._notifyObservers()}},e.prototype.completeTransitions_=function(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}},Object.defineProperty(e.prototype,"snapshot",{get:function(){var e=z(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}},enumerable:!1,configurable:!0}),e.prototype.on=function(e,t,n,r){var o=this,i=new Te(t,n,r);return this._addObserver(i),function(){o._removeObserver(i)}},e.prototype.then=function(e,t){return this._promise.then(e,t)},e.prototype.catch=function(e){return this.then(null,e)},e.prototype._addObserver=function(e){this._observers.push(e),this._notifyObserver(e)},e.prototype._removeObserver=function(e){var t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)},e.prototype._notifyObservers=function(){var e=this;this._finishPromise(),this._observers.slice().forEach(function(t){e._notifyObserver(t)})},e.prototype._finishPromise=function(){if(void 0!==this._resolve){var e=!0;switch(z(this._state)){case B.SUCCESS:Oe(this._resolve.bind(null,this.snapshot))();break;case B.CANCELED:case B.ERROR:Oe(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}},e.prototype._notifyObserver=function(e){switch(z(this._state)){case B.RUNNING:case B.PAUSED:e.next&&Oe(e.next.bind(e,this.snapshot))();break;case B.SUCCESS:e.complete&&Oe(e.complete.bind(e))();break;case B.CANCELED:case B.ERROR:e.error&&Oe(e.error.bind(e,this._error))();break;default:e.error&&Oe(e.error.bind(e,this._error))()}},e.prototype.resume=function(){var e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e},e.prototype.pause=function(){var e="running"===this._state;return e&&this._transition("pausing"),e},e.prototype.cancel=function(){var e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e},e}(),Ue=function(){function e(e,t){this._service=e,this._location=t instanceof V?t:V.makeFromUrl(t)}return e.prototype.toString=function(){return"gs://"+this._location.bucket+"/"+this._location.path},e.prototype._newRef=function(t,n){return new e(t,n)},Object.defineProperty(e.prototype,"root",{get:function(){var e=new V(this._location.bucket,"");return this._newRef(this._service,e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bucket",{get:function(){return this._location.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fullPath",{get:function(){return this._location.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return ae(this._location.path)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"storage",{get:function(){return this._service},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=function(e){if(0===e.length)return null;var t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===t)return null;var n=new V(this._location.bucket,t);return new e(this._service,n)},enumerable:!1,configurable:!0}),e.prototype._throwIfRoot=function(e){if(""===this._location.path)throw I(e)},e}();function Pe(e){var t={prefixes:[],items:[]};return xe(e,t).then(function(){return t})}function xe(e,t,n){return Object(w.b)(this,void 0,void 0,function(){var r,o,i;return Object(w.e)(this,function(a){switch(a.label){case 0:return[4,Ce(e,{pageToken:n})];case 1:return r=a.sent(),(o=t.prefixes).push.apply(o,r.prefixes),(i=t.items).push.apply(i,r.items),null==r.nextPageToken?[3,3]:[4,xe(e,t,r.nextPageToken)];case 2:a.sent(),a.label=3;case 3:return[2]}})})}function Ce(e,t){return Object(w.b)(this,void 0,void 0,function(){var n,r,o;return Object(w.e)(this,function(i){switch(i.label){case 0:return null!=t&&"number"==typeof t.maxResults&&$("options.maxResults",1,1e3,t.maxResults),[4,e.storage._getAuthToken()];case 1:return n=i.sent(),o=function(e,t,n,r,o){var i={};i.prefix=t.isRoot?"":t.path+"/",n&&n.length>0&&(i.delimiter=n),r&&(i.pageToken=r),o&&(i.maxResults=o);var a=Y(t.bucketOnlyServerUrl()),s=e.maxOperationRetryTime,u=new fe(a,"GET",function(e,t){return function(n,r){var o=function(e,t,n){var r=ie(n);return null===r?null:function(e,t,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n.prefixes)for(var o=0,i=n.prefixes;o<i.length;o++){var a=i[o].replace(/\/$/,""),s=e._makeStorageReference(new V(t,a));r.prefixes.push(s)}if(n.items)for(var u=0,c=n.items;u<c.length;u++)s=e._makeStorageReference(new V(t,c[u].name)),r.items.push(s);return r}(e,t,r)}(e,t,r);return de(null!==o),o}}(e,t.bucket),s);return u.urlParams=i,u.errorHandler=ge(t),u}(e.storage,e._location,"/",(r=t||{}).pageToken,r.maxResults),[2,e.storage._makeRequest(o,n).getPromise()]}})})}function Se(e,t){var n=function(e,t){var n=t.split("/").filter(function(e){return e.length>0}).join("/");return 0===e.length?n:e+"/"+n}(e._location.path,t),r=new V(e._location.bucket,n);return new Ue(e.storage,r)}function je(e){return/^[A-Za-z]+:\/\//.test(e)}function Ie(e,t){if(e instanceof Ae){var n=e;if(null==n._bucket)throw new k("no-default-bucket","No default bucket found. Did you set the 'storageBucket' property when initializing the app?");var r=new Ue(n,n._bucket);return null!=t?Ie(r,t):r}if(void 0!==t){if(t.includes(".."))throw S('`path` param cannot contain ".."');return Se(e,t)}return e}function Ee(e,t){if(t&&je(t)){if(e instanceof Ae)return new Ue(e,t);throw S("To use ref(service, url), the first argument must be a Storage instance.")}return Ie(e,t)}var Ae=function(){function e(e,t,n,r,o){var i,a;this.app=e,this._authProvider=t,this._pool=n,this._url=r,this._firebaseVersion=o,this._bucket=null,this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?V.makeFromBucketSpec(r):null==(a=null==(i=this.app.options)?void 0:i.storageBucket)?null:V.makeFromBucketSpec(a)}return Object.defineProperty(e.prototype,"maxUploadRetryTime",{get:function(){return this._maxUploadRetryTime},set:function(e){$("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxOperationRetryTime",{get:function(){return this._maxOperationRetryTime},set:function(e){$("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e},enumerable:!1,configurable:!0}),e.prototype._getAuthToken=function(){return Object(w.b)(this,void 0,void 0,function(){var e,t;return Object(w.e)(this,function(n){switch(n.label){case 0:return(e=this._authProvider.getImmediate({optional:!0}))?[4,e.getToken()]:[3,2];case 1:if(null!==(t=n.sent()))return[2,t.accessToken];n.label=2;case 2:return[2,null]}})})},e.prototype._delete=function(){return this._deleted=!0,this._requests.forEach(function(e){return e.cancel()}),this._requests.clear(),Promise.resolve()},e.prototype._makeStorageReference=function(e){return new Ue(this,e)},e.prototype._makeRequest=function(e,t){var n=this;if(this._deleted)return new Q(j());var r=function(e,t,n,r,o){var i=Z(e.urlParams),a=e.url+i,s=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(s,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(s,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!=t?t:"AppManager")}(s,o),new ee(a,e.method,s,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,r)}(e,this._appId,t,this._pool,this._firebaseVersion);return this._requests.add(r),r.getPromise().then(function(){return n._requests.delete(r)},function(){return n._requests.delete(r)}),r},e}();function Me(e,t){return Ee(e,t)}var Le,De,Fe=function(){function e(e,t,n){this._delegate=e,this.task=t,this.ref=n}return Object.defineProperty(e.prototype,"bytesTransferred",{get:function(){return this._delegate.bytesTransferred},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"state",{get:function(){return this._delegate.state},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"totalBytes",{get:function(){return this._delegate.totalBytes},enumerable:!1,configurable:!0}),e}(),qe=function(){function e(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}return Object.defineProperty(e.prototype,"snapshot",{get:function(){return new Fe(this._delegate.snapshot,this,this._ref)},enumerable:!1,configurable:!0}),e.prototype.then=function(e,t){var n=this;return this._delegate.then(function(t){if(e)return e(new Fe(t,n,n._ref))},t)},e.prototype.on=function(e,t,n,r){var o=this,i=void 0;return t&&(i="function"==typeof t?function(e){return t(new Fe(e,o,o._ref))}:{next:t.next?function(e){return t.next(new Fe(e,o,o._ref))}:void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,i,n||void 0,r||void 0)},e}(),Ne=function(){function e(e,t){this._delegate=e,this._service=t}return Object.defineProperty(e.prototype,"prefixes",{get:function(){var e=this;return this._delegate.prefixes.map(function(t){return new Be(t,e._service)})},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"items",{get:function(){var e=this;return this._delegate.items.map(function(t){return new Be(t,e._service)})},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nextPageToken",{get:function(){return this._delegate.nextPageToken||null},enumerable:!1,configurable:!0}),e}(),Be=function(){function e(e,t){this._delegate=e,this.storage=t}return Object.defineProperty(e.prototype,"name",{get:function(){return this._delegate.name},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bucket",{get:function(){return this._delegate.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fullPath",{get:function(){return this._delegate.fullPath},enumerable:!1,configurable:!0}),e.prototype.toString=function(){return this._delegate.toString()},e.prototype.child=function(t){return new e(function(e,t){return Se(e,t)}(this._delegate,t),this.storage)},Object.defineProperty(e.prototype,"root",{get:function(){return new e(this._delegate.root,this.storage)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._delegate.parent;return null==t?null:new e(t,this.storage)},enumerable:!1,configurable:!0}),e.prototype.put=function(e,t){return this._throwIfRoot("put"),new qe(function(e,t,n){return function(e,t,n){return e._throwIfRoot("uploadBytesResumable"),new ke(e,new oe(t),n)}(e,t,n)}(this._delegate,e,t),this)},e.prototype.putString=function(e,t,n){void 0===t&&(t=M.RAW),this._throwIfRoot("putString");var r=D(t,e),o=Object(w.a)({},n);return null==o.contentType&&null!=r.contentType&&(o.contentType=r.contentType),new qe(new ke(this._delegate,new oe(r.data,!0),o),this)},e.prototype.listAll=function(){var e,t=this;return(e=this._delegate,Pe(e)).then(function(e){return new Ne(e,t.storage)})},e.prototype.list=function(e){var t=this;return function(e,t){return Ce(e,t)}(this._delegate,e||void 0).then(function(e){return new Ne(e,t.storage)})},e.prototype.getMetadata=function(){return function(e){return Object(w.b)(this,void 0,void 0,function(){var t,n;return Object(w.e)(this,function(r){switch(r.label){case 0:return e._throwIfRoot("getMetadata"),[4,e.storage._getAuthToken()];case 1:return t=r.sent(),n=me(e.storage,e._location,le()),[2,e.storage._makeRequest(n,t).getPromise()]}})})}(this._delegate)},e.prototype.updateMetadata=function(e){return function(e,t){return function(e,t){return Object(w.b)(this,void 0,void 0,function(){var n,r;return Object(w.e)(this,function(o){switch(o.label){case 0:return e._throwIfRoot("updateMetadata"),[4,e.storage._getAuthToken()];case 1:return n=o.sent(),r=function(e,t,n,r){var o=Y(t.fullServerUrl()),i=pe(n,r),a=e.maxOperationRetryTime,s=new fe(o,"PATCH",be(e,r),a);return s.headers={"Content-Type":"application/json; charset=utf-8"},s.body=i,s.errorHandler=_e(t),s}(e.storage,e._location,t,le()),[2,e.storage._makeRequest(r,n).getPromise()]}})})}(e,t)}(this._delegate,e)},e.prototype.getDownloadURL=function(){return function(e){return Object(w.b)(this,void 0,void 0,function(){var t,n;return Object(w.e)(this,function(r){switch(r.label){case 0:return e._throwIfRoot("getDownloadURL"),[4,e.storage._getAuthToken()];case 1:return t=r.sent(),n=function(e,t,n){var r=Y(t.fullServerUrl()),o=e.maxOperationRetryTime,i=new fe(r,"GET",function(e,t){return function(n,r){var o=he(e,r,t);return de(null!==o),function(e,t){var n=ie(t);if(null===n)return null;if(!W(n.downloadTokens))return null;var r=n.downloadTokens;if(0===r.length)return null;var o=encodeURIComponent;return r.split(",").map(function(t){var n=e.fullPath;return Y("/b/"+o(e.bucket)+"/o/"+o(n))+Z({alt:"media",token:t})})[0]}(o,r)}}(e,n),o);return i.errorHandler=_e(t),i}(e.storage,e._location,le()),[2,e.storage._makeRequest(n,t).getPromise().then(function(e){if(null===e)throw new k("no-download-url","The given file does not have any download URLs.");return e})]}})})}(this._delegate)},e.prototype.delete=function(){return this._throwIfRoot("delete"),function(e){return Object(w.b)(this,void 0,void 0,function(){var t,n;return Object(w.e)(this,function(r){switch(r.label){case 0:return e._throwIfRoot("deleteObject"),[4,e.storage._getAuthToken()];case 1:return t=r.sent(),n=function(e,t){var n=Y(t.fullServerUrl()),r=new fe(n,"DELETE",function(e,t){},e.maxOperationRetryTime);return r.successCodes=[200,204],r.errorHandler=_e(t),r}(e.storage,e._location),[2,e.storage._makeRequest(n,t).getPromise()]}})})}(this._delegate)},e.prototype._throwIfRoot=function(e){if(""===this._delegate._location.path)throw I(e)},e}(),ze=function(){function e(e,t){var n=this;this.app=e,this._delegate=t,this.INTERNAL={delete:function(){return n._delegate._delete()}}}return Object.defineProperty(e.prototype,"maxOperationRetryTime",{get:function(){return this._delegate.maxOperationRetryTime},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxUploadRetryTime",{get:function(){return this._delegate.maxUploadRetryTime},enumerable:!1,configurable:!0}),e.prototype.ref=function(e){if(je(e))throw S("ref() expected a child path but got a URL, use refFromURL instead.");return new Be(Me(this._delegate,e),this)},e.prototype.refFromURL=function(e){if(!je(e))throw S("refFromURL() expected a full URL but got a child path, use ref() instead.");try{V.makeFromUrl(e)}catch(t){throw S("refFromUrl() expected a valid full URL but got an invalid one.")}return new Be(Me(this._delegate,e),this)},e.prototype.setMaxUploadRetryTime=function(e){this._delegate.maxUploadRetryTime=e},e.prototype.setMaxOperationRetryTime=function(e){this._delegate.maxOperationRetryTime=e},e}();function He(e){var t=function(e){return new f.a(function(t){var n=function(e){return t.next(e)};n(e.snapshot);var r=e.on("state_changed",n);return e.then(function(e){n(e),t.complete()},function(r){n(e.snapshot),function(e){t.error(e)}(r)}),function(){r()}}).pipe(Object(g.a)(0))}(e);return{task:e,then:e.then.bind(e),catch:e.catch.bind(e),pause:e.pause.bind(e),cancel:e.cancel.bind(e),resume:e.resume.bind(e),snapshotChanges:function(){return t},percentageChanges:function(){return t.pipe(Object(a.a)(function(e){return e.bytesTransferred/e.totalBytes*100}))}}}function Ge(e,t,n){return{getDownloadURL:function(){return Object(d.a)(void 0).pipe(Object(_.b)(t.outsideAngular),Object(m.a)(function(){return e.getDownloadURL()}),n)},getMetadata:function(){return Object(d.a)(void 0).pipe(Object(_.b)(t.outsideAngular),Object(m.a)(function(){return e.getMetadata()}),n)},delete:function(){return Object(b.a)(e.delete())},child:function(r){return Ge(e.child(r),t,n)},updateMetadata:function(t){return Object(b.a)(e.updateMetadata(t))},put:function(t,n){return He(e.put(t,n))},putString:function(t,n,r){return He(e.putString(t,n,r))},listAll:function(){return Object(b.a)(e.listAll())}}}De={TaskState:B,TaskEvent:{STATE_CHANGED:"state_changed"},StringFormat:M,Storage:Ae,Reference:Be},(Le=y.a).INTERNAL.registerComponent(new T.a("storage",function(e,t){var n=t.instanceIdentifier,r=e.getProvider("app").getImmediate(),o=e.getProvider("auth-internal");return new ze(r,new Ae(r,o,new X,n,y.a.SDK_VERSION))},"PUBLIC").setServiceProps(De).setMultipleInstances(!0)),Le.registerVersion("@firebase/storage","0.4.5");var Xe=new s.s("angularfire2.storageBucket"),Ve=new s.s("angularfire2.storage.maxUploadRetryTime"),Qe=new s.s("angularfire2.storage.maxOperationRetryTime"),We=function(){var e=function(){function e(t,n,r,o,i,a,s){Object(h.a)(this,e),this.schedulers=new v.d(i),this.keepUnstableUntilFirst=Object(v.h)(this.schedulers);var u=Object(v.g)(t,i,n);this.storage=Object(v.f)("".concat(u.name,".storage.").concat(r),"AngularFireStorage",u,function(){var e=i.runOutsideAngular(function(){return u.storage(r||void 0)});return a&&e.setMaxUploadRetryTime(a),s&&e.setMaxOperationRetryTime(s),e},[a,s])}return Object(p.a)(e,[{key:"ref",value:function(e){return Ge(this.storage.ref(e),this.schedulers,this.keepUnstableUntilFirst)}},{key:"refFromURL",value:function(e){return Ge(this.storage.refFromURL(e),this.schedulers,this.keepUnstableUntilFirst)}},{key:"upload",value:function(e,t,n){return Ge(this.storage.ref(e),this.schedulers,this.keepUnstableUntilFirst).put(t,n)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(s.bc(v.c),s.bc(v.b,8),s.bc(Xe,8),s.bc(s.D),s.bc(s.B),s.bc(Ve,8),s.bc(Qe,8))},e.\u0275prov=Object(s.Lb)({factory:function(){return new e(Object(s.bc)(v.c),Object(s.bc)(v.b,8),Object(s.bc)(Xe,8),Object(s.bc)(s.D),Object(s.bc)(s.B),Object(s.bc)(Ve,8),Object(s.bc)(Qe,8))},token:e,providedIn:"any"}),e}(),Je=n("7EHt"),Ke=n("bv9b"),$e=n("kmnG"),Ye=n("qFsG"),Ze=n("3Pt+"),et=n("bTqV"),tt=function(){function e(e,t,n,r){this.auth=e,this.postService=t,this.storage=n,this.router=r,this.saving="Create Post"}return e.prototype.ngOnInit=function(){},e.prototype.createPost=function(){var e=this,t={author:this.auth.authState.displayName||this.auth.authState.email,authorId:this.auth.currentUserId,content:this.content,image:this.image||null,published:new Date,title:this.title};this.postService.create(t),this.title="",this.content="",this.image="",this.saving="Post Created!",setTimeout(function(){return e.saving="Create Post"},3e3),this.router.navigateByUrl("blog")},e.prototype.uploadImage=function(e){return t=this,void 0,r=function(){var t,n,r,o,i;return function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}(this,function(a){switch(a.label){case 0:return n="posts/"+(t=e.target.files[0]).name,"image"===t.type.split("/")[0]?[3,1]:[2,alert("only image files")];case 1:return r=this.storage.upload(n,t),o=this.storage.ref(n),this.uploadPercent=r.percentageChanges(),[4,r];case 2:return a.sent(),console.log("Image uploaded!"),i=this,[4,o.getDownloadURL().toPromise()];case 3:i.image=a.sent(),a.label=4;case 4:return[2]}})},new((n=void 0)||(n=Promise))(function(e,o){function i(e){try{s(r.next(e))}catch(t){o(t)}}function a(e){try{s(r.throw(e))}catch(t){o(t)}}function s(t){var r;t.done?e(t.value):(r=t.value,r instanceof n?r:new n(function(e){e(r)})).then(i,a)}s((r=r.apply(t,[])).next())});var t,n,r},e.\u0275fac=function(t){return new(t||e)(s.Pb(i.a),s.Pb(l),s.Pb(We),s.Pb(r.c))},e.\u0275cmp=s.Jb({type:e,selectors:[["app-post-dashboard"]],decls:20,vars:9,consts:[["type","file","name","file","id","file",3,"change"],[3,"hidden"],["mode","determinate",3,"value"],[3,"src"],["matInput","","placeholder","Post title","name","title",3,"ngModel","ngModelChange"],["matInput","","placeholder","Post content","name","content","rows","10",3,"ngModel","ngModelChange"],["mat-raised-button","","color","accent",3,"click"]],template:function(e,t){1&e&&(s.Ub(0,"section"),s.Ub(1,"mat-accordion"),s.Ub(2,"mat-expansion-panel"),s.Ub(3,"mat-expansion-panel-header"),s.Ub(4,"mat-panel-title"),s.Fc(5," Create a Post "),s.Tb(),s.Tb(),s.Ub(6,"input",0),s.ec("change",function(e){return t.uploadImage(e)}),s.Tb(),s.Ub(7,"div",1),s.Qb(8,"mat-progress-bar",2),s.jc(9,"async"),s.Tb(),s.Ub(10,"div",1),s.Qb(11,"img",3),s.Tb(),s.Ub(12,"mat-form-field"),s.Ub(13,"input",4),s.ec("ngModelChange",function(e){return t.title=e}),s.Tb(),s.Tb(),s.Qb(14,"br"),s.Ub(15,"mat-form-field"),s.Ub(16,"textarea",5),s.ec("ngModelChange",function(e){return t.content=e}),s.Tb(),s.Tb(),s.Qb(17,"br"),s.Ub(18,"button",6),s.ec("click",function(){return t.createPost()}),s.Fc(19),s.Tb(),s.Tb(),s.Tb(),s.Tb()),2&e&&(s.Cb(7),s.oc("hidden",!t.uploadPercent),s.Cb(1),s.pc("value",s.kc(9,7,t.uploadPercent)),s.Cb(2),s.oc("hidden",!t.image),s.Cb(1),s.oc("src",t.image||"//:0",s.yc),s.Cb(2),s.oc("ngModel",t.title),s.Cb(3),s.oc("ngModel",t.content),s.Cb(3),s.Gc(t.saving))},directives:[Je.a,Je.c,Je.d,Je.e,Ke.a,$e.b,Ye.a,Ze.b,Ze.h,Ze.j,et.a],pipes:[o.b],styles:["section[_ngcontent-%COMP%]{max-width:700px;margin:2em auto}img[_ngcontent-%COMP%], mat-form-field[_ngcontent-%COMP%]{width:100%}"]}),e}(),nt=n("Wp6s"),rt=n("NFeN");function ot(e,t){if(1&e){var n=s.Vb();s.Ub(0,"button",8),s.ec("click",function(){return s.wc(n),s.ic(2).editing=!1}),s.Fc(1,"Cancel"),s.Tb()}}function it(e,t){if(1&e){var n=s.Vb();s.Ub(0,"mat-card-actions",9),s.Ub(1,"button",10),s.ec("click",function(){return s.wc(n),s.ic(2).editing=!0}),s.Ub(2,"mat-icon"),s.Fc(3,"edit"),s.Tb(),s.Tb(),s.Ub(4,"button",10),s.ec("click",function(){s.wc(n);var e=s.ic(2);return e.delete(e.post.id)}),s.Ub(5,"mat-icon"),s.Fc(6,"delete"),s.Tb(),s.Tb(),s.Tb()}}function at(e,t){if(1&e){var n=s.Vb();s.Sb(0),s.Ub(1,"div",1),s.Ub(2,"mat-card"),s.Ub(3,"h1"),s.Fc(4,"Edit Post"),s.Tb(),s.Ub(5,"mat-form-field"),s.Ub(6,"input",2),s.ec("ngModelChange",function(e){return s.wc(n),s.ic().post.title=e}),s.Tb(),s.Tb(),s.Qb(7,"br"),s.Ub(8,"mat-form-field"),s.Ub(9,"textarea",3),s.ec("ngModelChange",function(e){return s.wc(n),s.ic().post.content=e}),s.Tb(),s.Tb(),s.Qb(10,"br"),s.Ub(11,"button",4),s.ec("click",function(){return s.wc(n),s.ic().updatePost()}),s.Fc(12,"Save"),s.Tb(),s.Dc(13,ot,2,0,"button",5),s.Tb(),s.Tb(),s.Ub(14,"div",1),s.Ub(15,"mat-card"),s.Qb(16,"img",6),s.Ub(17,"h2"),s.Fc(18),s.Tb(),s.Ub(19,"p"),s.Ub(20,"small"),s.Fc(21),s.jc(22,"date"),s.Tb(),s.Tb(),s.Ub(23,"mat-card-content"),s.Ub(24,"p"),s.Fc(25),s.Tb(),s.Tb(),s.Dc(26,it,7,0,"mat-card-actions",7),s.Tb(),s.Tb(),s.Rb()}if(2&e){var r=s.ic();s.Cb(1),s.oc("hidden",!r.editing),s.Cb(5),s.oc("ngModel",r.post.title),s.Cb(3),s.oc("ngModel",r.post.content),s.Cb(4),s.oc("ngIf",r.editing),s.Cb(1),s.oc("hidden",r.editing),s.Cb(2),s.pc("src",r.post.image,s.yc),s.pc("alt",r.post.title),s.Cb(2),s.Gc(r.post.title),s.Cb(3),s.Ic("Posted by ",r.post.author," \u2022 on ",s.lc(22,12,r.post.published.toDate(),"fullDate"),""),s.Cb(4),s.Gc(r.post.content),s.Cb(1),s.oc("ngIf",r.auth.currentUserId===r.post.authorId)}}var st=function(){function e(e,t,n,r){this.route=e,this.router=t,this.postService=n,this.auth=r,this.editing=!1}return e.prototype.ngOnInit=function(){console.log("detal loaded"),this.getPost()},e.prototype.getPost=function(){var e=this,t=this.route.snapshot.paramMap.get("id");this.postService.getPostData(t).subscribe(function(t){return e.post=t})},e.prototype.updatePost=function(){var e={title:this.post.title,content:this.post.content},t=this.route.snapshot.paramMap.get("id");this.postService.update(t,e),this.editing=!1},e.prototype.delete=function(){var e=this.route.snapshot.paramMap.get("id");this.postService.delete(e),this.router.navigate(["/blog"])},e.\u0275fac=function(t){return new(t||e)(s.Pb(r.a),s.Pb(r.c),s.Pb(l),s.Pb(i.a))},e.\u0275cmp=s.Jb({type:e,selectors:[["app-post-detail"]],decls:1,vars:1,consts:[[4,"ngIf"],[3,"hidden"],["matInput","","placeholder","Post title","name","title",3,"ngModel","ngModelChange"],["matInput","","placeholder","Post content","name","content","rows","10",3,"ngModel","ngModelChange"],["mat-raised-button","","color","accent",3,"click"],["mat-button","",3,"click",4,"ngIf"],["mat-card-image","",3,"src","alt"],["align","end",4,"ngIf"],["mat-button","",3,"click"],["align","end"],["mat-icon-button","",3,"click"]],template:function(e,t){1&e&&s.Dc(0,at,27,15,"ng-container",0),2&e&&s.oc("ngIf",t.post)},directives:[o.m,nt.a,$e.b,Ye.a,Ze.b,Ze.h,Ze.j,et.a,nt.d,nt.c,nt.b,rt.a],pipes:[o.e],styles:["mat-card[_ngcontent-%COMP%]{margin:10px auto;max-width:700px}mat-form-field[_ngcontent-%COMP%]{width:100%}"]}),e}();function ut(e,t){if(1&e){var n=s.Vb();s.Ub(0,"mat-card-actions",4),s.Ub(1,"button",5),s.ec("click",function(){s.wc(n);var e=s.ic().$implicit;return s.ic().delete(e.id)}),s.Ub(2,"mat-icon"),s.Fc(3,"delete"),s.Tb(),s.Tb(),s.Tb()}}function ct(e,t){if(1&e&&(s.Ub(0,"mat-card"),s.Ub(1,"mat-card-content",1),s.Qb(2,"img",2),s.Ub(3,"h2"),s.Fc(4),s.Tb(),s.Ub(5,"p"),s.Ub(6,"small"),s.Fc(7),s.jc(8,"date"),s.Tb(),s.Tb(),s.Tb(),s.Dc(9,ut,4,0,"mat-card-actions",3),s.Tb()),2&e){var n=t.$implicit,r=s.ic();s.Cb(1),s.pc("routerLink",n.id),s.Cb(1),s.pc("src",n.image,s.yc),s.pc("alt",n.title),s.Cb(2),s.Gc(n.title),s.Cb(3),s.Ic("Posted by ",n.author," \u2022 on ",s.lc(8,7,n.published.toDate(),"fullDate"),""),s.Cb(2),s.oc("ngIf",r.auth.currentUserId===n.authorId)}}var lt=function(){function e(e,t){this.postService=e,this.auth=t}return e.prototype.ngOnInit=function(){console.log("loaded"),this.posts=this.postService.getPosts()},e.prototype.delete=function(e){this.postService.delete(e)},e.\u0275fac=function(t){return new(t||e)(s.Pb(l),s.Pb(i.a))},e.\u0275cmp=s.Jb({type:e,selectors:[["app-post-list"]],decls:3,vars:3,consts:[[4,"ngFor","ngForOf"],[3,"routerLink"],["mat-card-image","",3,"src","alt"],["align","end",4,"ngIf"],["align","end"],["mat-icon-button","",3,"click"]],template:function(e,t){1&e&&(s.Ub(0,"section"),s.Dc(1,ct,10,10,"mat-card",0),s.jc(2,"async"),s.Tb()),2&e&&(s.Cb(1),s.oc("ngForOf",s.kc(2,1,t.posts)))},directives:[o.l,nt.a,nt.c,r.d,nt.d,o.m,nt.b,et.a,rt.a],pipes:[o.b,o.e],styles:["section[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));grid-template-rows:auto;grid-gap:10px;margin:0 auto;max-width:90%}mat-card[_ngcontent-%COMP%]{margin:10px 0}"]}),e}(),ht=n("/t3+"),pt=[{path:"",component:lt},{path:"dashboard",component:tt,canActivate:[function(){function e(e,t){this.authService=e,this.router=t,this.routeURL=this.router.url}return e.prototype.canActivate=function(e,t){var n=this;return new Promise(function(e,t){n.authService.user.subscribe(function(t){return t||"/homepage"===n.routeURL?(n.routeURL=n.router.url,e(!0)):(n.routeURL="/login",n.router.navigate(["/homepage"],{queryParams:{return:"login"}}),alert("Not logged in"),e(!1))})})},e.\u0275fac=function(t){return new(t||e)(s.bc(i.a),s.bc(r.c))},e.\u0275prov=s.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()]},{path:":id",component:st}],ft=function(){function e(){}return e.\u0275mod=s.Nb({type:e}),e.\u0275inj=s.Mb({factory:function(t){return new(t||e)},providers:[l],imports:[[r.f.forChild(pt),o.c,nt.e,et.b,nt.e,Je.b,Ke.b,rt.b,Ye.b,ht.a,Ze.d]]}),e}()}}]);